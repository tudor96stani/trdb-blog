{% extends "index.html" %}
{% import "macros/post_macros.html" as post_macros %}

{% block title %}
{% if page.title %}
{{ page.title }}
{% else %}
{{ super() }}
{% endif %}
{% endblock title %}

{% block header %}
{{ super() }}
{% endblock header %}

{% block main %}

<script src="https://giscus.app/client.js" data-repo="tudor96stani/trdb-blog" data-repo-id="R_kgDOQkJdmQ"
    data-category="General" data-category-id="DIC_kwDOQkJdmc4Czf4m" data-mapping="pathname" data-strict="0"
    data-reactions-enabled="1" data-emit-metadata="1" data-input-position="bottom" data-theme="preferred_color_scheme"
    data-lang="en" crossorigin="anonymous" async>
    </script>

<article itemscope itemtype="http://schema.org/BlogPosting">
    <header>
        <h1 itemprop="headline">{{ page.title }}</h1>
        <data class="muted">{{ post_macros::meta(page=page) }}</data>
    </header>

    <article itemprop="articleBody">
        {% if page.summary and page.summary != page.content %}
        {{ page.summary | safe }}

        {% if page.extra.toc | default(value=false) and page.toc %}
        {% include "partials/toc.html" %}
        {% endif %}

        <!-- Render the rest of the content after removing the summary portion -->
        {{ page.content | replace(from=page.summary, to="") | safe }}

        {% else %}
        <!-- If no summary separate from content, just render content -->
        {{ page.content | safe }}
        {% endif %}
    </article>

    <nav style="display:flex; justify-content:space-between; width:100%; border:0px; margin-top:3rem; margin-bottom:3rem;">

    {# Newer (previous in chronology) — always left side #}
    {% if page.higher %}
        <a href="{{ page.higher.permalink }}" style="color:var(--color-primary)">
            ← {{ page.higher.title }}
        </a>
    {% else %}
        <span style="visibility:hidden">placeholder</span>
    {% endif %}

    {# Older (next in chronology) — always right side #}
    {% if page.lower %}
        <a href="{{ page.lower.permalink }}" style="color:var(--color-primary)">
            {{ page.lower.title }} →
        </a>
    {% else %}
        <span style="visibility:hidden">placeholder</span>
    {% endif %}

</nav>

    <div class="giscus"></div>

    <!-- Comment section -->
    {% block comments %}
    {% if config.extra.comments | default(value="false") %}
    {% if page.extra.comments | default(value="true")%}
    {% include "_giscus_script.html" %}
    {% endif %}
    {% endif %}
    {% endblock comments %}


    <!-- Page footer -->
    {% include "partials/footer.html" %}
</article>

{% endblock main %}